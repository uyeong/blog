<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>첫 인상이 좋은 E2E 테스트 프레임워크, TestCafe | Coderifleman&#39;s blog</title>
  
    <meta name="description" content="E2E 테스트 프레임워크의 한 종류인 TestCafe를 소개하고 사용 방법과 또 다른 E2E 테스트 프레임워크인 나이트왓치와의 차이점을 간략하게 살펴본다.">
  
  
    <meta name="keywords" content="Programming,Development,Web Developer,FrontEnd Developer,Web,FrontEnd,Architecture,UI,UX,Test,E2E,E2E Test,TestCafe">
  
  
    <meta name="author" content="Coderifleman">
  
  
    <link rel="alternate" href="/atom.xml" title="Coderifleman&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <meta name="description" content="E2E 테스트 프레임워크의 한 종류인 TestCafe를 소개하고 사용 방법과 또 다른 E2E 테스트 프레임워크인 나이트왓치와의 차이점을 간략하게 살펴본다.">
<meta property="og:type" content="article">
<meta property="og:title" content="첫 인상이 좋은 E2E 테스트 프레임워크, TestCafe">
<meta property="og:url" content="http://blog.coderifleman.com/2016/10/31/good-first-impression-testcafe/index.html">
<meta property="og:site_name" content="Coderifleman&#39;s blog">
<meta property="og:description" content="E2E 테스트 프레임워크의 한 종류인 TestCafe를 소개하고 사용 방법과 또 다른 E2E 테스트 프레임워크인 나이트왓치와의 차이점을 간략하게 살펴본다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="http://blog.coderifleman.com/images/good-first-impression-testcafe/testcafe.01.gif">
<meta property="og:image" content="http://blog.coderifleman.com/images/good-first-impression-testcafe/testcafe.02.gif">
<meta property="og:image" content="http://blog.coderifleman.com/images/good-first-impression-testcafe/testcafe.03.png">
<meta property="og:image" content="http://blog.coderifleman.com/images/good-first-impression-testcafe/testcafe.04.png">
<meta property="article:published_time" content="2016-10-30T15:00:00.000Z">
<meta property="article:modified_time" content="2022-11-09T05:45:21.011Z">
<meta property="article:author" content="Coderifleman">
<meta property="article:tag" content="Test">
<meta property="article:tag" content="E2E">
<meta property="article:tag" content="E2E Test">
<meta property="article:tag" content="TestCafe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.coderifleman.com/images/good-first-impression-testcafe/testcafe.01.gif">
<meta name="twitter:creator" content="@coderifleman">
<meta name="twitter:site" content="http://blog.coderifleman.com/2016/10/31/good-first-impression-testcafe/index.html">
  
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Nanum+Myeongjo:400,700&display=swap.css">

  
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">

  
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css" media="(prefers-color-scheme: dark)">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-solarizedlight.min.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)">
  
<link rel="stylesheet" href="/style.css">

  <link rel="stylesheet" href="/dark.css" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0"></head>
<body>

<div class="root">
  <header class="header">
  <div class="header__picture">
    <a href="/">
      <img src="/images/common/author.png" alt="Coderifleman's Picture"/>
    </a>
  </div>
  <div class="header__detail">
    <h1 class="header__title">
      <a href="/">
        Coderifleman&#39;s blog
      </a>
    </h1>
    <p class="header__subtitle">frontend development stories.</p>
    <div class="header__media">
      <ul class="media">
  
    
      <li class="media__medium">
        
          <a href="mailto:uyeong21c@gmail.com">
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span class="blind">Email</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//twitter.com/coderifleman" target="_blank">
            <i class="fa fa-twitter" aria-hidden="true"></i>
            <span class="blind">Twitter</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//facebook.com/coderifleman" target="_blank">
            <i class="fa fa-facebook" aria-hidden="true"></i>
            <span class="blind">Facebook</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//github.com/uyeong" target="_blank">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span class="blind">Github</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="/atom.xml" target="_blank">
            <i class="fa fa-rss" aria-hidden="true"></i>
            <span class="blind">RSS</span>
          </a>
        
      </li>
    
  
</ul>

    </div>
  </div>
</header>

  <section class="post">
  <div class="post__inner">
    <article class="post__body">
      <div class="post__header">
        <h1 class="post__title">첫 인상이 좋은 E2E 테스트 프레임워크, TestCafe</h1>
        <div class="post__meta">
          <div class="meta">
  <div class="meta__datetime">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <time datetime="2016-10-31T00:00:00+09:00">
      2016.10.31
    </time>
  </div>
  <div class="meta__categories ellipsis">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    
      <div class="meta__category-list">
        
          <a href="/categories/JavaScript/" class="meta__category-list-item">
            <span>JavaScript</span>
          </a>
          
            <span>&nbsp/ </span>
          
        
          <a href="/categories/JavaScript/Test/" class="meta__category-list-item">
            <span>Test</span>
          </a>
          
        
      </div>
    
  </div>
</div>

        </div>
        <div class="post__tags">
          <div class="tags">
  <ul class="tags__list">
    
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/Test/" >
            #Test
          </a>
        </li>
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/E2E/" >
            #E2E
          </a>
        </li>
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/E2E-Test/" >
            #E2E Test
          </a>
        </li>
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/TestCafe/" >
            #TestCafe
          </a>
        </li>
      
    
  </ul>
</div>

        </div>
      </div>
      
      
        <aside class="post__toc">
          <h2>목차</h2>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TestCafe-%EC%86%8C%EA%B0%9C"><span class="toc-number">1.</span> <span class="toc-text">TestCafe 소개</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%A2%8B%EC%9D%80-%EC%9D%B8%EC%83%81"><span class="toc-number">2.</span> <span class="toc-text">좋은 인상</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%95%84%EC%89%AC%EC%9A%B4-%EC%A0%90"><span class="toc-number">3.</span> <span class="toc-text">아쉬운 점</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EB%81%9D%EC%9C%BC%EB%A1%9C"><span class="toc-number">4.</span> <span class="toc-text">끝으로</span></a></li></ol>
        </aside>
      
      <div class="post__contents">
        <p>인생을 살다 보면 괴롭지만 꼭 해야만 하는 일을 만나게 된다. 프런트엔드개발자에겐 그런 일 중 하나가 바로 UI 테스트가 아닐까 싶은데, 이 고통스러운 일을 조금이나마 덜어줄 잘 만들어진 도구나 프레임워크를 찾지만 쉽지 않다. 처음엔 좋아 보여도 실제 테스트를 작성하다 보면 금세 그 도구가 가진 한계점을 만나게 된다. 그래서 그런지 다른 일보다도 더욱 도구에 의존하게 되고 개선된 또 다른 도구를 찾게 되는 것 같다.</p>
<p><a target="_blank" rel="noopener" href="http://devexpress.github.io/testcafe/">TestCafe</a>는 자바스크립트 소식을 매주 정리해 공유하는 사이트인 <a target="_blank" rel="noopener" href="https://jser.info/">JSer.info</a>의 <a target="_blank" rel="noopener" href="https://jser.info/2016/10/24/npm-4.0.0-node.js-v6.9.0-lts-webpack2/">2016년 10월 24일 자 소식</a>을 통해 알게 됐다. 해당 문서에 링크된 <a target="_blank" rel="noopener" href="http://efcl.info/2016/10/23/testcafe/">TestCafe로 브라우저 자동 테스트(일본어)</a>를 읽어보았는데 생각보다 느낌이 좋아서 한번 리뷰해보자는 결론을 내렸다.</p>
<h2 id="TestCafe-소개"><a href="#TestCafe-소개" class="headerlink" title="TestCafe 소개"></a>TestCafe 소개</h2><p>TestCafe는 <a target="_blank" rel="noopener" href="https://www.devexpress.com/">DevExpress</a>가 개발한 E2E 테스트 프레임워크다. InfoQ에 TestCafe와 관련된 인터뷰 글(<a target="_blank" rel="noopener" href="https://www.infoq.com/news/2013/08/testcafe">TestCafe with Smart Script Injection, Traffic and Markup Analysis Tools</a>)이 있으니 관심 있는 사람은 참고하길 바란다. 같은 이름의 <a target="_blank" rel="noopener" href="https://testcafe.devexpress.com/">웹 서비스 및 클라이언트 앱</a>도 서비스 중인데 이 서비스는 셀레니움 IDE 처럼 GUI로 조작하고 행위를 기록하여 재생할 수 있다.</p>
<p>TestCafe는 <a target="_blank" rel="noopener" href="http://webdriver.io/">webdriber.io</a>나 <a target="_blank" rel="noopener" href="http://nightwatchjs.org/">나이트왓치</a>와는 다르게 테스트 관련 스크립트를 주입해 동작하는 셀레니움 RC(Selenium RC)와 흡사한 방식으로 개발됐다. 사실 셀레니움 RC가 가진 한계를 극복하고자 셀레니움 웹드라이버(Selenium WebDriver)를 개발했는데 다시 셀레니움 RC와 비슷한 구조로 테스트 프레임워크를 만들었다고 해서 “그렇다면 과거에 경험했던 한계를 그대로 답습하는 게 아닌가?”하고 조금 의아했다. </p>
<p>TestCafe의 개발자 <a target="_blank" rel="noopener" href="https://github.com/inikulin">이반 니쿨린(Ivan Nikulin)</a>은 <a target="_blank" rel="noopener" href="https://testcafe-discuss.devexpress.com/t/why-not-use-selenium/47">Why not use Selenium?</a>에서 그 이유를 밝혔는데 간단히 말해서 테스트 환경에 대한 복잡한 설정 없이 실행할 수 있고, 모바일 기기에서도 원격 접속해 테스트할 수 있는 도구를 만들고 싶어 했던 거 같다. 또, 웹드라이버의 호환성 문제를 회피하기 위한 목적도 있는 것 같다.</p>
<p>셀레니움은 분명 훌륭한 도구지만 설정이 복잡하고 웹드라이버 자체의 버그로 인해 테스트 작성에 종종 걸림돌이 되는 경우가 있다. 또 테스트 코드 자체를 디버깅하기가 까다로워 복잡한 테스트 케이스를 작성하는데 어려운 면도 가지고 있다. 과거 셀레니움 RC 방식에 한계가 있어 셀레니움을 만들었지만 새로운 문제들이 나타났다. 이러한 상황에서 TestCafe의 지향점이 좋은 해결책이 될 수 있을까?</p>
<h2 id="좋은-인상"><a href="#좋은-인상" class="headerlink" title="좋은 인상"></a>좋은 인상</h2><p>필자는 유료 웹툰을 서비스하고 있는 <a target="_blank" rel="noopener" href="http://www.lezhin.com/">레진(Lezhin)</a>을 이용해 로그인 테스트를 작성해 봤다. 예제 코드는 저장소 <a target="_blank" rel="noopener" href="https://github.com/UYEONG/demo-testcafe">UYEONG/demo-testcafe</a>를 참고한다. 이번 절에서는 이 예제를 이용해 필자가 받은 몇 가지 좋은 인상을 소개하겠다.</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'사용자는 GNB 메뉴에서 로그인할 수 있다.'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Given</span>
    <span class="token keyword">const</span> popupAttendanceLogin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupAttendanceLogin</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> popupAttendanceLogin<span class="token punctuation">.</span><span class="token function">exist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">await</span> popupAttendanceLogin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">await</span> t
        <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#main-menu-toggle'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span><span class="token string">'#login-email'</span><span class="token punctuation">,</span> <span class="token constant">ACCOUNT</span><span class="token punctuation">.</span><span class="token constant">USER_NAME</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span><span class="token string">'#login-password'</span><span class="token punctuation">,</span> <span class="token constant">ACCOUNT</span><span class="token punctuation">.</span><span class="token constant">PASSWORD</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// When</span>
    <span class="token keyword">await</span> t
        <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'form.login-form button[type=submit]'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Then</span>
    <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#main-menu-toggle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> email <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getElement</span><span class="token punctuation">(</span><span class="token string">'sidenav-email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">assert</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>visible<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assert</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span>innerText <span class="token operator">===</span> <span class="token constant">ACCOUNT</span><span class="token punctuation">.</span><span class="token constant">USER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>위는 레진에서 GNB 메뉴를 이용해 로그인이 정상적으로 이뤄지는지 테스트하는 코드다. 그리고 이 코드는 <code>await/async</code>를 이용해 비동기적 절차를 동기적으로 표현하고 있다. TestCafe는 바벨(Babel)을 내장하고 있어 별도의 설정 없이 최신 사양을 이용할 수 있다. 최신 사양으로 코드를 작성하고자 할 때 복잡한 세팅을 해줘야 하는 기존의 테스트 프레임워크와는 다른 부분이다. </p>

    <figure title="TestCafe에서 디버깅하기">
      <a href="/images/good-first-impression-testcafe/testcafe.01.gif" target="_blank">
        <img 
          src="/images/good-first-impression-testcafe/testcafe.01.gif" 
          alt="TestCafe에서 디버깅하기" 
          style=""
        >
      </a>
      <figcaption>&lt;그림 1. TestCafe에서 디버깅하기&gt;</figcaption>
    </figure>
  

<p>또, <code>await/async</code> 방식으로 테스트 코드를 작성하면 디버깅이 쉽다는 장점이 있는데 체이닝을 펼치기 쉬우므로 각 액션을 단계별로 관찰할 수 있다. 나이트왓치는 파이프라인 방식으로 디자인돼 있어 디버깅이 다소 까다롭다.</p>
<p>그럼 이제 실행을 해보자. 해당 저장소를 클론하고 다음 명령어를 입력하면 바로 테스트할 수 있다.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> clone git@github.com:UYEONG/demo-testcafe.git
$ <span class="token function">npm</span> <span class="token function">install</span>
$ <span class="token function">npm</span> run <span class="token builtin class-name">test</span></code></pre>

<p><code>npm scripts</code>에 등록한 <code>test</code> 명령은 다음과 같다. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ testcafe chrome tests/</code></pre>

<p>뭔가 추가적인 설정이 없으니 오히려 불안하다. 하지만 그 안락함에 금방 익숙해진다. 이것저것 세팅해줘야 했던 셀레니움 기반 프레임워크(<a href="http://blog.coderifleman.com/2016/06/17/e2e-test-and-nightwatch/#%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0">참고</a>)와는 사뭇 다른 경험이다.</p>

    <figure title="로그인 테스트 실행 결과">
      <a href="/images/good-first-impression-testcafe/testcafe.02.gif" target="_blank">
        <img 
          src="/images/good-first-impression-testcafe/testcafe.02.gif" 
          alt="로그인 테스트 실행 결과" 
          style=""
        >
      </a>
      <figcaption>&lt;그림 2. 로그인 테스트 실행 결과&gt;</figcaption>
    </figure>
  

<p>그림 2는 로그인 테스트가 진행되는 모습이다. 이 테스트의 진행 절차는 다음과 같다.</p>
<ol>
<li><a target="_blank" rel="noopener" href="http://www.lezhin.com/">www.lezhin.com</a> 페이지에 접근한다. </li>
<li>최초에 출력된 팝업이 있다면 닫는다.</li>
<li>우측 상단의 메뉴 버튼을 클릭한다.</li>
<li>이메일 / 패스워드를 입력하고 로그인 버튼을 선택한다.</li>
<li>페이지가 갱신되면 다시 우측 상단의 메뉴 버튼을 클릭한다.</li>
<li>로그인이 정상적으로 완료 됐는지 확인한다.</li>
</ol>
<p>특정 절차에서 다음 절차로 넘어가기 위해선 지연 시간(Delay time)이 필요하다. 예를 들어 최초 페이지에 접근할 때는 콘텐츠가 모두 출력되는 시점을 기다려야 하고 팝업을 닫을 때는 애니메이션(FadeOut)이 종료되는 시간을 기다려야 한다. 나이트왓치에서는 이런 지연 시간을 직접 명시해줘야 한다.</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 페이지에 최초 접근 시 body 엘리먼트가 보일 때까지 5000ms 기다린다.</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>_header
    <span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">waitForElementVisible</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token comment">// 팝업을 닫을때 애니메이션 시간을 고려해 500ms 기다린다.</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'@close'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>하지만 TestCafe를 이용할 땐 지연 시간을 직접 입력할 일이 상대적으로 적다. TestCafe는 지연 시간을 직접 계산하고 관리한다. 실제로 위 로그인 테스트 코드를 보면 지연 시간을 명시한 지점은 로그인 버튼을 클릭한 시점 즉, 폼을 서브밋하고 갱신되기를 기다리는 딱 한 곳뿐이다.</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'form.login-form button[type=submit]'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>지연 시간이라고 해도 거의 대충 시간을 짐작해 입력하는 일에 불과하다. 물론 비기능적 요구사항도 테스트에 포함돼야 하지만 애니메이션 종료 시점까지 일일이 명시해야 한다는 것은 분명 귀찮은 일이다. </p>
<p>그리고 이벤트 지점을 커서로 표현해주거나 실제 타이핑을 하는 느낌을 살려 텍스트를 입력하는 부분도 인상적이다. 셀레니움 기반 테스트 프레임워크는 이런 자연스러운 느낌이 상대적으로 적다.</p>

    <figure title="TestCafe의 에러 리포팅">
      <a href="/images/good-first-impression-testcafe/testcafe.03.png" target="_blank">
        <img 
          src="/images/good-first-impression-testcafe/testcafe.03.png" 
          alt="TestCafe의 에러 리포팅" 
          style=""
        >
      </a>
      <figcaption>&lt;그림 3. TestCafe의 에러 리포팅&gt;</figcaption>
    </figure>
  

<p>마지막으로 에러 리포팅도 상당히 깔끔한 편인데 어느 지점에서 어떠한 에러가 낫는지 알기 쉽게 출력해준다. 그림 3을 보면 24번째 행의 코드에 문제가 있음을 쉽게 알 수 있다.</p>
<p>구구절절 설명했지만 TestCafe를 리뷰하면서 좋은 인상을 받은 점을 간단히 정리하면 다음과 같다.</p>
<ul>
<li>바벨을 내장하고 있어서 특별한 설정 없이 ES6+ 사양을 사용할 수 있다.</li>
<li>테스트 코드 디버깅이 상대적으로 쉽다.</li>
<li>특별한 설정 없이 커멘드 라인 명령으로 바로 테스트할 수 있다.</li>
<li>특정 조작에 대한 지연 시간을 자동으로 관리한다.</li>
<li>테스트 실패 및 에러 리포팅이 깔끔한 편이다.</li>
</ul>
<h2 id="아쉬운-점"><a href="#아쉬운-점" class="headerlink" title="아쉬운 점"></a>아쉬운 점</h2><p>분명 기존의 E2E 테스트 프레임워크보다 몇 가지 좋은 인상을 가지고 있는건 분명하다. 하지만 아쉬운 점도 있다. 일단 다양한 상황을 테스트하기엔 액션 셋과 API가 부족하다. </p>

    <figure title="TestCafe와 그 외 프레임워크의 API 목록">
      <a href="/images/good-first-impression-testcafe/testcafe.04.png" target="_blank">
        <img 
          src="/images/good-first-impression-testcafe/testcafe.04.png" 
          alt="TestCafe와 그 외 프레임워크의 API 목록" 
          style=""
        >
      </a>
      <figcaption>&lt;그림 4. TestCafe와 그 외 프레임워크의 API 목록&gt;</figcaption>
    </figure>
  

<p>왼쪽 부터 차례대로 TestCafe, 나이트왓치, webdriver.io 가 제공하고 있는 액션 및 API 목록이다. 기본적인 액션은 제공하지만, 모바일에 특화된 액션이나 스크립트 권한 밖의 액션 등은 이용하기 힘들다. 시간이 지나면서 제공될 수 있는 API도 있지만 TestCafe가 가지고 있는 구조적 한계로 인해 아예 불가능한 API도 있다.</p>
<p>또, E2E 테스트를 할 때 좋은 패턴들이 있는데 그중 하나가 <code>PageObject</code>다. 테스트에 필요한 반복적인 행위나 엘리먼트 셀렉터 등을 밖으로 노출 시키지 않고 페이지 단위(혹은 컴포넌트 단위)로 추상화해 제공할 수 있다(<a target="_blank" rel="noopener" href="http://nightwatchjs.org/guide#page-objects">참고</a>). <code>PageObject</code>는 테스트 코드의 가독성이나 유지 보수 측면에서 훌륭한 패턴이지만 TestCafe에서는 제공하지 않는다. </p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// page-objects/popup-attendance-login.js</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Selector<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> querySelector <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token parameter">q</span> <span class="token operator">=></span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name">PopupAttendanceLogin</span> <span class="token punctuation">&#123;</span>
    elements <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        wrapper<span class="token operator">:</span> <span class="token string">'#popup-attendance-login'</span><span class="token punctuation">,</span>
        closeBtn<span class="token operator">:</span> <span class="token string">'#popup-attendance-login .attlogin__close'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">testController</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>t <span class="token operator">=</span> testController<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">async</span> <span class="token function">exist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> wrapper<span class="token punctuation">.</span>visible<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">async</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> closeBtn <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span>closeBtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>closeBtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
 
<span class="token keyword">export</span> <span class="token keyword">default</span> PopupAttendanceLogin<span class="token punctuation">;</span>

<span class="token comment">// tests/signin-test.js</span>
<span class="token keyword">import</span> PopupAttendanceLogin <span class="token keyword">from</span> <span class="token string">'../page-objects/popup-attendance-login'</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'사용자는 GNB 메뉴에서 로그인할 수 있다.'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Given</span>
    <span class="token keyword">const</span> popupAttendanceLogin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupAttendanceLogin</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> popupAttendanceLogin<span class="token punctuation">.</span><span class="token function">exist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">await</span> popupAttendanceLogin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// ... 생략 ...</span></code></pre>

<p>그래서 필자는 위 코드처럼 직접 <code>PageObject</code>와 비슷한 객체를 직접 만들고 테스트 코드를 작성했다. 만약 프레임워크 자체에서 이 개념을 제공한다면 조금 더 편리하게 코드를 작성할 수 있을 것 같다.</p>
<h2 id="끝으로"><a href="#끝으로" class="headerlink" title="끝으로"></a>끝으로</h2><p>여기까지 TestCafe를 소개하고 필자가 느낀 좋은 인상과 아쉬운 점을 함께 이야기했다. 이 도구가 우리의 UI 테스트 환경의 답이 돼 줄 것이라 생각하지 않는다. 분명 실제로 테스트를 작성하기 시작하면 온갖 버그와 미흡한 점을 만나게 될 것이다. 하지만 아직 시작된 지 얼마 안 된 프로젝트라는 점을 미루어 볼 때 차차 개선될 것이라고 긍정적으로 생각할 수 있다. </p>
<p>중요한 건 그들이 어떤 문제를 해결하고 싶어 하고 어디에 지향점을 두고 있느냐다. 그것이 내 앞에 놓인 문제 혹은 환경과 맞아떨어진다면 더할 나위 없는 좋은 도구가 될 것이다.</p>

      </div>
    </article>
    <div class="post__footer">
      <div class="post__navigation">
        <nav class="navigation">
  
  
  <div class="navigation__prev">
    
      <span class="navigation__guide">Next Post</span>
      <a href="/2016/11/28/scroll-restoration-property-of-history/" class="navigation__link">
        <p class="navigation__title ellipsis">history 객체의 scrollRestoration 속성</p>
      </a>
      <div class="navigation__meta">
        <div class="meta">
  <div class="meta__datetime">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <time datetime="2016-11-28T00:00:00+09:00">
      2016.11.28
    </time>
  </div>
  <div class="meta__categories ellipsis">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    
      <div class="meta__category-list">
        
          <a href="/categories/JavaScript/" class="meta__category-list-item">
            <span>JavaScript</span>
          </a>
          
            <span>&nbsp/ </span>
          
        
          <a href="/categories/JavaScript/Etc/" class="meta__category-list-item">
            <span>Etc</span>
          </a>
          
        
      </div>
    
  </div>
</div>

      </div>
      <p class="navigation__desc">
        onload 타임에 특정 위치에 자동 스크롤링 되는 기능을 프로토타이핑 하면서 마주한 문제와 history 객체의 scrollRestoration 속성으로 해결한 과정을 소개합니다.
      </p>
    
  </div>
  <div class="navigation__next">
    
      <span class="navigation__guide">Previous Post</span>
      <a href="/2016/10/11/read-the-engineering-technology-and-society/" class="navigation__link">
        <p class="navigation__title ellipsis">공학기술과 사회를 읽고</p>
      </a>
      <div class="navigation__meta">
        <div class="meta">
  <div class="meta__datetime">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <time datetime="2016-10-11T00:00:00+09:00">
      2016.10.11
    </time>
  </div>
  <div class="meta__categories ellipsis">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    
      <div class="meta__category-list">
        
          <a href="/categories/Book/" class="meta__category-list-item">
            <span>Book</span>
          </a>
          
        
      </div>
    
  </div>
</div>

      </div>
      <p class="navigation__desc">
        지호출판사에서 발행한 「공학기술과 사회」라는 책을 읽고 개인적인 느낌과 감평을 작성한 문서입니다.
      </p>
    
  </div>
</nav>

      </div>
      
        <div class="post__comments">
          <div id="disqus_thread"></div>
          <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by
              Disqus.</a></noscript>
        </div>
      
    </div>
  </div>
</section>

  <footer class="footer">
  <div class="footer__media">
    <ul class="media">
  
    
      <li class="media__medium">
        
          <a href="mailto:uyeong21c@gmail.com">
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span class="blind">Email</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//twitter.com/coderifleman" target="_blank">
            <i class="fa fa-twitter" aria-hidden="true"></i>
            <span class="blind">Twitter</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//facebook.com/coderifleman" target="_blank">
            <i class="fa fa-facebook" aria-hidden="true"></i>
            <span class="blind">Facebook</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//github.com/uyeong" target="_blank">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span class="blind">Github</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="/atom.xml" target="_blank">
            <i class="fa fa-rss" aria-hidden="true"></i>
            <span class="blind">RSS</span>
          </a>
        
      </li>
    
  
</ul>

  </div>
  <div class="footer__copyright">
    © 2014–2023 Copyright by <a href="/">Coderifleman</a>.<br />
    All rights reserved.
  </div>
</footer>

</div>

  <script>
    var disqus_config = function () {
      this.page.url = 'http://blog.coderifleman.com/2016/10/31/good-first-impression-testcafe/';
      this.page.identifier = '2016/10/31/good-first-impression-testcafe/';
    };
    (function () {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//coderifleman.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-55659240-1']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script src="//production-assets.codepen.io/assets/embed/ei.js"></script>


<script src="/script.js"></script>

</body>
</html>

