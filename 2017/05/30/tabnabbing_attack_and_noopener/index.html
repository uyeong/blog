<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Tabnabbing 공격과 rel=noopener 속성 | Coderifleman&#39;s blog</title>
  
    <meta name="description" content="이 문서는 Tabnabbing 공격과 이를 막을 수 있는 rel=noopener 속성에 대해 소개합니다.">
  
  
    <meta name="keywords" content="Programming,Development,Web Developer,FrontEnd Developer,Web,FrontEnd,Architecture,UI,UX,JavaScript,Security,Attack,Hacking">
  
  
    <meta name="author" content="Coderifleman">
  
  
    <link rel="alternate" href="/atom.xml" title="Coderifleman&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <meta name="description" content="이 문서는 Tabnabbing 공격과 이를 막을 수 있는 rel&#x3D;noopener 속성에 대해 소개합니다.">
<meta property="og:type" content="article">
<meta property="og:title" content="Tabnabbing 공격과 rel&#x3D;noopener 속성">
<meta property="og:url" content="http://blog.coderifleman.com/2017/05/30/tabnabbing_attack_and_noopener/index.html">
<meta property="og:site_name" content="Coderifleman&#39;s blog">
<meta property="og:description" content="이 문서는 Tabnabbing 공격과 이를 막을 수 있는 rel&#x3D;noopener 속성에 대해 소개합니다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="http://blog.coderifleman.com/images/tabnabbing_attack_and_noopener/tab-nabbing.01.svg">
<meta property="og:image" content="http://blog.coderifleman.com/images/tabnabbing_attack_and_noopener/tab-nabbing.02.gif">
<meta property="og:image" content="http://blog.coderifleman.com/images/tabnabbing_attack_and_noopener/tab-nabbing.03.png">
<meta property="og:image" content="http://blog.coderifleman.com/images/tabnabbing_attack_and_noopener/tab-nabbing.04.png">
<meta property="article:published_time" content="2017-05-29T15:00:00.000Z">
<meta property="article:modified_time" content="2022-11-09T05:45:21.014Z">
<meta property="article:author" content="Coderifleman">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="Security">
<meta property="article:tag" content="Attack">
<meta property="article:tag" content="Hacking">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.coderifleman.com/images/tabnabbing_attack_and_noopener/tab-nabbing.01.svg">
<meta name="twitter:creator" content="@coderifleman">
<meta name="twitter:site" content="http://blog.coderifleman.com/2017/05/30/tabnabbing_attack_and_noopener/index.html">
  
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Nanum+Myeongjo:400,700&display=swap.css">

  
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">

  
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css" media="(prefers-color-scheme: dark)">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-solarizedlight.min.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)">
  
<link rel="stylesheet" href="/style.css">

  <link rel="stylesheet" href="/dark.css" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0"></head>
<body>

<div class="root">
  <header class="header">
  <div class="header__picture">
    <a href="/">
      <img src="/images/common/author.png" alt="Coderifleman's Picture"/>
    </a>
  </div>
  <div class="header__detail">
    <h1 class="header__title">
      <a href="/">
        Coderifleman&#39;s blog
      </a>
    </h1>
    <p class="header__subtitle">frontend development stories.</p>
    <div class="header__media">
      <ul class="media">
  
    
      <li class="media__medium">
        
          <a href="mailto:uyeong21c@gmail.com">
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span class="blind">Email</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//twitter.com/coderifleman" target="_blank">
            <i class="fa fa-twitter" aria-hidden="true"></i>
            <span class="blind">Twitter</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//facebook.com/coderifleman" target="_blank">
            <i class="fa fa-facebook" aria-hidden="true"></i>
            <span class="blind">Facebook</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//github.com/uyeong" target="_blank">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span class="blind">Github</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="/atom.xml" target="_blank">
            <i class="fa fa-rss" aria-hidden="true"></i>
            <span class="blind">RSS</span>
          </a>
        
      </li>
    
  
</ul>

    </div>
  </div>
</header>

  <section class="post">
  <div class="post__inner">
    <article class="post__body">
      <div class="post__header">
        <h1 class="post__title">Tabnabbing 공격과 rel=noopener 속성</h1>
        <div class="post__meta">
          <div class="meta">
  <div class="meta__datetime">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <time datetime="2017-05-30T00:00:00+09:00">
      2017.05.30
    </time>
  </div>
  <div class="meta__categories ellipsis">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    
      <div class="meta__category-list">
        
          <a href="/categories/JavaScript/" class="meta__category-list-item">
            <span>JavaScript</span>
          </a>
          
        
      </div>
    
  </div>
</div>

        </div>
        <div class="post__tags">
          <div class="tags">
  <ul class="tags__list">
    
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/JavaScript/" >
            #JavaScript
          </a>
        </li>
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/Security/" >
            #Security
          </a>
        </li>
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/Attack/" >
            #Attack
          </a>
        </li>
      
        <li class="tags__item">
          <a class="tags__link" href="/tags/Hacking/" >
            #Hacking
          </a>
        </li>
      
    
  </ul>
</div>

        </div>
      </div>
      
      
        <aside class="post__toc">
          <h2>목차</h2>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tabnabbing"><span class="toc-number">1.</span> <span class="toc-text">Tabnabbing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NAVER-%EB%A9%94%EC%9D%BC%EA%B3%BC-Gmail"><span class="toc-number">2.</span> <span class="toc-text">NAVER 메일과 Gmail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rel-noopener-%EC%86%8D%EC%84%B1"><span class="toc-number">3.</span> <span class="toc-text">rel&#x3D;noopener 속성</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C"><span class="toc-number">4.</span> <span class="toc-text">참고자료</span></a></li></ol>
        </aside>
      
      <div class="post__contents">
        <h2 id="Tabnabbing"><a href="#Tabnabbing" class="headerlink" title="Tabnabbing"></a>Tabnabbing</h2><p>Tabnabbing이란 HTML 문서 내에서 링크(target이 _blank인 Anchor 태그)를 클릭 했을 때 새롭게 열린 탭(또는 페이지)에서 기존의 문서의 location을 피싱 사이트로 변경해 정보를 탈취하는 공격 기술을 뜻한다. 이 공격은 메일이나 오픈 커뮤니티에서 쉽게 사용될 수 있다.</p>

    <figure title="Tabnabbing 공격 흐름">
      <a href="/images/tabnabbing_attack_and_noopener/tab-nabbing.01.svg" target="_blank">
        <img 
          src="/images/tabnabbing_attack_and_noopener/tab-nabbing.01.svg" 
          alt="Tabnabbing 공격 흐름" 
          style="max-width:420px"
        >
      </a>
      <figcaption>&lt;그림 1. Tabnabbing 공격 흐름(<a target="_blank" rel="noopener" href="https://blog.jxck.io/entries/2016-06-12/noopener.html">출처</a>)&gt;</figcaption>
    </figure>
  

<p>공격 절차는 다음과 같다.</p>
<ol>
<li>사용자가 <code>cgm.example.com</code>에 접속한다.</li>
<li>해당 사이트에서 <code>happy.example.com</code>으로 갈 수 있는 외부 링크를 클릭한다.</li>
<li>새탭으로 <code>happy.example.com</code>가 열린다.</li>
</ol>
<ul>
<li><code>happy.example.com</code>에는 <code>window.opener</code> 속성이 존재한다.</li>
<li>자바스크립트를 사용해 opener의 location을 피싱 목적의 <code>cgn.example.com/login</code> 으로 변경한다.</li>
</ul>
<ol start="4">
<li>사용자는 다시 본래의 탭으로 돌아온다.</li>
<li>로그인이 풀렸다고 생각하고 아이디와 비밀번호를 입력한다.</li>
</ol>
<ul>
<li><code>cgn.example.com</code>은 사용자가 입력한 계정 정보를 탈취한 후 다시 본래의 사이트로 리다이렉트한다.</li>
</ul>
<h2 id="NAVER-메일과-Gmail"><a href="#NAVER-메일과-Gmail" class="headerlink" title="NAVER 메일과 Gmail"></a>NAVER 메일과 Gmail</h2><p>시나리오를 하나 그려보자. 공격자가 네이버 계정을 탈취할 목적으로 여러분에게 바겐세일 정보를 담은 메일을 보냈다. 그 메일에는 [자세히 보기]라는 외부 링크가 포함돼 있다.</p>
<p>물론 이 바겐세일 정보는 가짜지만 공격자에겐 중요하지 않다. 메일을 읽는 사람이 유혹에 빠져 링크를 클릭하면 그만이다.</p>

    <figure title="NAVER 메일을 이용한 Tabnabbing 데모">
      <a href="/images/tabnabbing_attack_and_noopener/tab-nabbing.02.gif" target="_blank">
        <img 
          src="/images/tabnabbing_attack_and_noopener/tab-nabbing.02.gif" 
          alt="NAVER 메일을 이용한 Tabnabbing 데모" 
          style="max-width:420px"
        >
      </a>
      <figcaption>&lt;그림 2. NAVER 메일을 이용한 Tabnabbing 데모&gt;</figcaption>
    </figure>
  

<p>국내에서 가장 유명한 포털 회사인 NAVER가 이러한 공격에 다소 미흡한 점은 못내 아쉽다. NAVER 뿐만 아니라 DAUM도 마찬가지이며 아마 카페 서비스도 동일하게 재현할 수 있지 않을까 생각한다.</p>
<p>하지만 Gmail은 이 공격이 통하지 않는다. Gmail은 이러한 공격을 막기 위해 Anchor 태그에 data-saferedirecturl 속성을 부여해 안전하게 리다이렉트 한다. Twitter도 동일한 방법으로 대응하고 있다.</p>

    <figure title="Gmail의 소스 코드">
      <a href="/images/tabnabbing_attack_and_noopener/tab-nabbing.03.png" target="_blank">
        <img 
          src="/images/tabnabbing_attack_and_noopener/tab-nabbing.03.png" 
          alt="Gmail의 소스 코드" 
          style="max-width:420px"
        >
      </a>
      <figcaption>&lt;그림 3. Gmail의 소스 코드&gt;</figcaption>
    </figure>
  

<h2 id="rel-noopener-속성"><a href="#rel-noopener-속성" class="headerlink" title="rel=noopener 속성"></a>rel=noopener 속성</h2><p>이러한 공격의 취약점을 극복하고자 noopener 속성이 추가 됐다.</p>
<p>rel=noopener 속성이 부여된 링크를 통해 열린 페이지는 location 변경과 같은 자바스크립트 요청을 거부한다. 정확히 말해서 <code>Uncaught TypeError</code> 에러를 발생시킨다(크롬 기준).</p>

    <figure title="새탭의 콘솔 결과">
      <a href="/images/tabnabbing_attack_and_noopener/tab-nabbing.04.png" target="_blank">
        <img 
          src="/images/tabnabbing_attack_and_noopener/tab-nabbing.04.png" 
          alt="새탭의 콘솔 결과" 
          style="max-width:420px"
        >
      </a>
      <figcaption>&lt;그림 4. 새탭의 콘솔 결과&gt;</figcaption>
    </figure>
  

<p>이 속성은 <a target="_blank" rel="noopener" href="https://labs.jxck.io/noopener/">Window Opener Demo</a> 페이지를 통해 테스트해볼 수 있다.</p>
<p>크롬은 버전 49, 파이어폭스 52부터 지원한다. 파이어폭스 52가 2017년 3월에 릴리즈 된 것을 감안하면 이 속성 만으로 안심하긴 힘들 것 같다. 자세한 지원 여부는 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types">Link types</a>를 참고한다.</p>
<p>따라서 이러한 공격이 우려스러운 서비스(메일, 커뮤니티, 댓글 시스템 등)라면 <a target="_blank" rel="noopener" href="https://danielstjules.github.io/blankshield/">blankshield</a>와 같은 라이브러리를 사용하자.</p>
<p>noopener 속성은 보안적 측면 외에도 성능 상의 이점도 취할 수 있다.</p>
<p>_blank 속성으로 열린 탭(페이지)는 언제든지 opener를 참조할 수 있다. 그래서 부모 탭과 같은 스레드에서 페이지가 동작한다. 이때 새탭의 페이지가 리소스를 많이 사용한다면 덩달아 부모 탭도 함께 느려진다.</p>
<p>noopener 속성을 사용해 열린 탭은 부모를 호출할 일이 없다. 따라서 같은 스레드 일 필요 없으며 새로운 페이지가 느리다고 부모 탭까지 느려질 일도 없다.</p>

    <div class="alert alert--info">
      
      <div class="alert__body">
        <p>rel=&quot;noopener&quot; prevents window.opener, so there&#39;s no cross-window access. Chromium browsers optimise for this and open the new page in its own process.</p>

      </div>
    </div>
  

<p>자세한 내용은 <a target="_blank" rel="noopener" href="https://jakearchibald.com/2016/performance-benefits-of-rel-noopener/">The performance benefits of rel=noopener</a>을 참고하자.</p>
<h2 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.azarask.in/blog/post/a-new-type-of-phishing-attack/">Tabnabbing: A New Type of Phishing Attack</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/">Target=”_blank” - the most underestimated vulnerability ever</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.jxck.io/entries/2016-06-12/noopener.html">링크에 rel=noopener를 부여해 Tabnabbing을 대비</a>(일본어)</li>
<li><a target="_blank" rel="noopener" href="https://jakearchibald.com/2016/performance-benefits-of-rel-noopener/">The performance benefits of rel=noopener</a></li>
</ul>

      </div>
    </article>
    <div class="post__footer">
      <div class="post__navigation">
        <nav class="navigation">
  
  
  <div class="navigation__prev">
    
      <span class="navigation__guide">Next Post</span>
      <a href="/2017/12/18/the-clean-architecture/" class="navigation__link">
        <p class="navigation__title ellipsis">The Clean Architecture</p>
      </a>
      <div class="navigation__meta">
        <div class="meta">
  <div class="meta__datetime">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <time datetime="2017-12-18T00:00:00+09:00">
      2017.12.18
    </time>
  </div>
  <div class="meta__categories ellipsis">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    
      <div class="meta__category-list">
        
          <a href="/categories/Architecture/" class="meta__category-list-item">
            <span>Architecture</span>
          </a>
          
        
      </div>
    
  </div>
</div>

      </div>
      <p class="navigation__desc">
        이 문서는 로버트 C. 마틴의 The Clean Architecture를 한국어로 번역한 문서입니다. 그의 좋은 의도와 생각이 널리 전파되길 바랍니다
      </p>
    
  </div>
  <div class="navigation__next">
    
      <span class="navigation__guide">Previous Post</span>
      <a href="/2017/03/19/bezier-curves-for-frontend-engineer-3/" class="navigation__link">
        <p class="navigation__title ellipsis">프런트엔드 엔지니어를 위한 베지에 곡선(Bezier Curves) - 3편</p>
      </a>
      <div class="navigation__meta">
        <div class="meta">
  <div class="meta__datetime">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <time datetime="2017-03-19T00:00:00+09:00">
      2017.03.19
    </time>
  </div>
  <div class="meta__categories ellipsis">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    
      <div class="meta__category-list">
        
          <a href="/categories/Algorithm/" class="meta__category-list-item">
            <span>Algorithm</span>
          </a>
          
        
      </div>
    
  </div>
</div>

      </div>
      <p class="navigation__desc">
        이 문서는 프런트개발에 있어서 유용하게 사용되는 베지에 곡선(Bezier Curves)의 원리를 수학적으로 자세히 소개하는 글의 세 번째 편입니다.
      </p>
    
  </div>
</nav>

      </div>
      
        <div class="post__comments">
          <div id="disqus_thread"></div>
          <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by
              Disqus.</a></noscript>
        </div>
      
    </div>
  </div>
</section>

  <footer class="footer">
  <div class="footer__media">
    <ul class="media">
  
    
      <li class="media__medium">
        
          <a href="mailto:uyeong21c@gmail.com">
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span class="blind">Email</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//twitter.com/coderifleman" target="_blank">
            <i class="fa fa-twitter" aria-hidden="true"></i>
            <span class="blind">Twitter</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//facebook.com/coderifleman" target="_blank">
            <i class="fa fa-facebook" aria-hidden="true"></i>
            <span class="blind">Facebook</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="//github.com/uyeong" target="_blank">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span class="blind">Github</span>
          </a>
        
      </li>
    
  
    
      <li class="media__medium">
        
          <a href="/atom.xml" target="_blank">
            <i class="fa fa-rss" aria-hidden="true"></i>
            <span class="blind">RSS</span>
          </a>
        
      </li>
    
  
</ul>

  </div>
  <div class="footer__copyright">
    © 2014–2023 Copyright by <a href="/">Coderifleman</a>.<br />
    All rights reserved.
  </div>
</footer>

</div>

  <script>
    var disqus_config = function () {
      this.page.url = 'http://blog.coderifleman.com/2017/05/30/tabnabbing_attack_and_noopener/';
      this.page.identifier = '2017/05/30/tabnabbing_attack_and_noopener/';
    };
    (function () {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//coderifleman.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-55659240-1']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script src="//production-assets.codepen.io/assets/embed/ei.js"></script>


<script src="/script.js"></script>

</body>
</html>

